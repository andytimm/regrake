% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_target_values.R
\name{normalize_target_sum}
\alias{normalize_target_sum}
\title{Target Value Computation for Raking}
\usage{
normalize_target_sum(targets, label)
}
\arguments{
\item{targets}{Numeric vector of target proportions}

\item{label}{Variable name for error/warning messages}
}
\value{
Normalized targets summing to exactly 1
}
\description{
This file contains functions for computing target values used in raking.
The main workflow is:
\enumerate{
\item User provides population data in one of several supported formats
\item Data is converted to a standardized "autumn" format (which I think is most elegant)
\item Target values are computed for each term in the raking formula based on the formula specification
}

Supported formats:
\itemize{
\item proportions: "autumn" style data frame with variable, level, target columns
\item weighted: Unit-level data with weights column
\item anesrake: List of named vectors (anesrake package format)
\item survey: Data frame with margin, category, value columns
\item survey_design: survey package design object
\item raw: Unit-level data to compute targets from
}

The autumn format is a standardized data frame with columns:
\itemize{
\item variable: Name of the variable or interaction (e.g., "age" or "race:age")
\item level: Level within the variable (for categorical) or statistic name (for continuous, e.g., "mean")
\item target: Target value for that level (proportion for categorical, value for continuous)
}
}
\section{File Structure}{

\itemize{
\item process_pop_data: Main entry point for format detection and conversion
\item process_proportions_data: Proportions/autumn format processor
\item process_*_data functions: Other format processors (weighted, raw, anesrake, survey, survey_design)
\item compute_target_values: Main function to compute raking targets
\item expand_joint_distribution: Helper for computing joint distributions
Normalize target proportions to sum to 1
}

Checks that target proportions sum to approximately 1 and normalizes them.
Silent for tiny deviations (< 0.1\%), warns for small deviations (< 5\%),
errors for large deviations (>= 5\%).
}

\keyword{internal}
